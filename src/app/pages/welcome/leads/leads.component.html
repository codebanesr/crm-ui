<div class="table-operations">
  <button nz-button nzType="primary" (click)="open()"><i nz-icon nzType="aim" nzTheme="outline"></i>Advanced Filters</button>
  <button nz-button nzType="primary" (click)="createLead()"><i nz-icon nzType="plus" nzTheme="outline"></i> Lead</button>
  <nz-input-group nzSearch [nzAddOnAfter]="suffixIconButton" style="display: inline-block; max-width: 150px;" (change)="handleSearchTerm()">
    <input type="text" nz-input placeholder="input search text" [(ngModel)]="leadOptions.searchTerm"/>
  </nz-input-group>
  <ng-template #suffixIconButton>
    <button nz-button nzType="primary" nzSearch><i nz-icon nzType="search"></i></button>
  </ng-template>
</div>
<nz-table
  #filterTable
  [nzData]="listOfData"
  nzTableLayout="scroll"
  (nzPageIndexChange)="onPageIndexChange($event)"
  (nzPageSizeChange)="onPageSizeChange($event)"
  *ngIf="listOfData.length > 0"
>
  <thead>
    <tr>
      <th
        *ngFor="let column of listOfColumns"
      >
        {{ typeDict[column.name].label }}
      </th>
      <th>Actions</th>
    </tr>
  </thead>
  <tbody>
    <tr *ngFor="let data of filterTable.data">
      <td *ngFor="let key of objectkeys(data)">
        <!-- {{ data[key] }} -->
        {{typeDict[key].type === 'date' ? (data[key] | date) : (data[key])}}
      </td>
      <td class="actions">
        <i nz-icon nzType="api" nzTheme="fill" (click)="takeActions('assign')"></i> &nbsp;
        <i nz-icon nzType="book" nzTheme="outline" (click)="takeActions('history')"></i> &nbsp;
        <i nz-icon nzType="user-delete" nzTheme="outline" (click)="takeActions('unassign')"></i>
      </td>
    </tr>
  </tbody>
</nz-table>

<nz-drawer [nzClosable]="false" [nzVisible]="visible" [nzPlacement]="placement" nzTitle="Select Advanced Filters" (nzOnClose)="close()" nzWidth="300px">
  <form nz-form [formGroup]="filterForm" nzLayout="vertical" (ngSubmit)="submitForm()">
    <nz-form-item>
      <nz-form-label [nzSpan]="24" nzRequired nzFor="handlerEmail">Handler Email</nz-form-label>
      <nz-form-control [nzSpan]="24">
        <input type="text" nz-input formControlName="handlerEmail" placeholder="Please input your name" />
      </nz-form-control>
    </nz-form-item>
    <nz-form-item>
      <nz-form-label [nzSpan]="24" nzFor="dateRange">Date Range</nz-form-label>
      <nz-form-control [nzSpan]="24">
        <nz-range-picker formControlName="dateRange"></nz-range-picker>
      </nz-form-control>
    </nz-form-item>

    <nz-form-item>
      <nz-form-label [nzSpan]="24" nzFor="moduleTypes">Module Types</nz-form-label>
      <nz-select
      [nzMaxTagCount]="3"
      [nzMaxTagPlaceholder]="tagPlaceHolder"
      nzMode="multiple"
      nzPlaceHolder="Please select"
      formControlName="moduleTypes"
    >
      <nz-option *ngFor="let item of listOfOption" [nzLabel]="item" [nzValue]="item"></nz-option>
    </nz-select>
    </nz-form-item>
    <button nz-button nzType="primary">Submit</button>
  </form>
  <nz-divider nzText="Fields To Show"></nz-divider>
  <nz-checkbox-group [(ngModel)]="showCols" (ngModelChange)="rerenderCols()"></nz-checkbox-group>
</nz-drawer>
